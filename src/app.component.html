
<div class="min-h-screen bg-[#F8F9FA] flex flex-col font-sans">
  <!-- Header -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-30 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
      
      <!-- Logo & Title -->
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-gray-900 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md">
          BD
        </div>
        <div class="hidden sm:block">
          <h1 class="text-lg font-bold text-gray-900 leading-tight">LinkMaster</h1>
          <p class="text-[10px] font-medium text-gray-500 uppercase tracking-wider">BYD &bull; Daltonsoft</p>
        </div>
      </div>
      
      <!-- Central Context Selector (Dealer) -->
      <div class="flex-1 max-w-2xl mx-4 flex items-center justify-center">
        <div class="relative w-full max-w-[500px]">
           <label class="absolute -top-2 left-3 bg-white px-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider">
             Agencia Seleccionada
           </label>
           <select [value]="apiService.selectedDealerCode()" (change)="onDealerChange($event)"
             class="w-full h-11 pl-4 pr-8 bg-gray-50 border border-gray-200 rounded-xl text-sm font-bold text-gray-800 focus:ring-2 focus:ring-blue-500 outline-none appearance-none cursor-pointer hover:bg-gray-100 transition-colors shadow-sm">
             <option value="" disabled selected>Seleccionar Agencia de Trabajo</option>
             @for (dealer of dealers(); track dealer.dealerCode) {
               <option [value]="dealer.dealerCode">
                 {{ dealer.dealerCode }} - {{ dealer.dealerName }}
               </option>
             }
           </select>
           <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-500">
             <i class="fas fa-building text-xs"></i>
           </div>
        </div>
      </div>

      <!-- Controls & Profile -->
      <div class="flex items-center gap-3">
        
        <!-- Mock Toggle (Compact) -->
        <button (click)="apiService.toggleMockData()" 
          class="hidden md:flex items-center justify-center w-8 h-8 rounded-full transition-colors border"
          [class]="apiService.useMockData() ? 'bg-amber-50 text-amber-600 border-amber-200' : 'bg-emerald-50 text-emerald-600 border-emerald-200'"
          title="Toggle Data Source (Mock vs Live)">
           <i class="fas" [class]="apiService.useMockData() ? 'fa-database' : 'fa-globe'"></i>
        </button>
        
        <div class="hidden md:flex flex-col items-end border-l border-gray-200 pl-4 ml-1">
          <span class="text-sm font-bold text-gray-700">Admin User</span>
          <span class="text-[10px] text-gray-400">IT Manager</span>
        </div>

        <div class="w-9 h-9 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold text-sm border border-indigo-700 cursor-pointer shadow-sm hover:bg-indigo-700 transition-colors">
           A
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full flex flex-col">
    
    <!-- Navigation Tabs -->
    <div class="flex items-center justify-between mb-6">
      <nav class="flex space-x-1 bg-gray-100 p-1 rounded-xl">
        <a routerLink="/mapping" routerLinkActive="bg-white text-gray-900 shadow-sm" 
           class="px-5 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 transition-all flex items-center gap-2">
           <i class="fas fa-link"></i> Mapping
        </a>
        <a routerLink="/orders" routerLinkActive="bg-white text-gray-900 shadow-sm" 
           class="px-5 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 transition-all flex items-center gap-2">
           <i class="fas fa-clipboard-list"></i> Órdenes
        </a>
        <a routerLink="/config" routerLinkActive="bg-white text-gray-900 shadow-sm" 
           class="px-5 py-2 rounded-lg text-sm font-medium text-gray-500 hover:text-gray-900 transition-all flex items-center gap-2">
           <i class="fas fa-cogs"></i> Configuración
        </a>
      </nav>
      
      <!-- Breadcrumb / Context Info -->
      <div class="hidden lg:block text-xs text-gray-400 font-mono">
         @if(apiService.selectedDealerCode()) {
           Contexto: {{ apiService.selectedDealerCode() }}
         } @else {
           <span class="text-orange-400"><i class="fas fa-exclamation-triangle"></i> Sin agencia seleccionada</span>
         }
      </div>
    </div>

    <!-- Router Outlet -->
    <div class="flex-1 relative">
      <router-outlet></router-outlet>
    </div>

  </main>
  
  <footer class="bg-white border-t border-gray-200 py-6 mt-auto">
    <div class="max-w-7xl mx-auto px-4 text-center text-sm text-gray-400">
      &copy; 2024 Daltonsoft Integrator for BYD.
    </div>
  </footer>
</div>
